<div class="breadcrumbs" id="breadcrumbs">
    <ul class="breadcrumb">
        <li>
            <i class="ace-icon fa fa-home home-icon"></i>
            <a ng-href="#/">主页</a>
        </li>

        <li>
            <a ng-href="#/products">产品管理</a>
        </li>
        <li class="active">编辑产品</li>
    </ul><!-- /.breadcrumb -->
</div>

<!-- view -->
<div class="page-content">
    <div class="row">
        <div class="col-md-7 col-xs-12">
            <div class="widget-box transparent">
                <div class="widget-header">
                    <h4 class="widget-title lighter"><i class="fa fa-edit"></i> 编辑</h4>

                    <div class="widget-toolbar no-border">
                        <a href="" data-action="collapse">
                            <i class="ace-icon fa fa-chevron-up"></i>
                        </a>

                    </div>
                </div>

                <div class="widget-body">
                    <div class="widget-main padding-18 no-padding-left no-padding-right">
                        <div class="row">
                            <div class="col-xs-12">
                                <form class="form-horizontal">
                                    <!-- #section:elements.form -->
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label no-padding-right"> 大分类</label>

                                        <div class="col-md-6 col-sm-9">
                                            <select class="form-control"
                                                    ng-options="cate.categoryId as cate.name for cate in vm.topCates"
                                                    ng-model="vm.selectedTopCateId"
                                                    ng-change="vm.topCateChanged()"></select>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-sm-3 control-label no-padding-right"> 陈列货架</label>

                                        <div class="col-md-6 col-sm-9">
                                            <select class="form-control"
                                                    ng-options="cate.categoryId as cate.name for cate in vm.secondCates"
                                                    ng-model="vm.selectedSecondCateId"
                                                    ng-change="vm.secondCateChanged()"></select>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-sm-3 control-label no-padding-right"> 中分类</label>

                                        <div class="col-md-6 col-sm-9">
                                            <select class="form-control"
                                                    ng-options="cate.categoryId as cate.name for cate in vm.thirdCates"
                                                    ng-model="vm.editProduct.categoryId"></select>
                                        </div>
                                    </div>

                                    <!--<div class="form-group">
                                        <label class="col-sm-3 control-label no-padding-right"> 商品代码 </label>

                                        <div class="col-md-6 col-sm-9">
                                            <input class="col-xs-12" type="text"
                                                   ng-model="vm.editProduct.productCode" />
                                        </div>
                                    </div>


                                    <div class="form-group">
                                        <label class="col-sm-3 control-label no-padding-right"> 促销券 | 优惠券 </label>

                                        <div class="col-sm-3">
                                            <input class="col-xs-12" type="text"
                                                   ng-model="vm.editProduct.promotionCode" />

                                        </div>
                                        <div class="col-sm-3">
                                            <input class="col-xs-12" type="text"
                                                   ng-model="vm.editProduct.cuponCode" />
                                        </div>

                                    </div>

                                    <div class="form-group">
                                        <label class="col-sm-3 control-label no-padding-right"> Topics | Ranking </label>

                                        <div class="col-sm-3">
                                            <input class="col-xs-12" type="text"
                                                   ng-model="vm.editProduct.topicCode" />
                                        </div>
                                        <div class="col-sm-3">
                                            <input class="col-xs-12" type="text"
                                                   ng-model="vm.editProduct.rankingCode" />
                                        </div>
                                    </div>-->


                                    <div class="form-group">
                                        <label class="col-sm-3 control-label no-padding-right"> 品牌 </label>

                                        <div class="col-md-6 col-sm-9">
                                            <select class="col-xs-12"
                                                    ng-options="brand.brandId as brand.name for brand in vm.brands"
                                                    ng-model="vm.editProduct.brandId"
                                                    ng-change="vm.brandChanged()"></select>

                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label no-padding-right"> 系列</label>
                                        <div class="col-md-6 col-sm-9">
                                            <select class="col-xs-12"
                                                    ng-options="brandcollection.brandCollectionId as brandcollection.displayName for brandcollection in vm.brandcollections"
                                                    ng-model="vm.editProduct.brandCollectionId">
                                                <option value="">空</option>
                                            </select>
                                        </div>
                                    </div>



                                <div class="form-group">
                                        <label class="col-sm-3 control-label no-padding-right" for="form-field-1-1"> 商品名称1 </label>

                                        <div class="col-md-6 col-sm-9">
                                            <input type="text" class="form-control"
                                                   ng-model="vm.editProduct.primaryName" />
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-sm-3 control-label no-padding-right" for="form-field-1-1"> 商品名称2 </label>

                                        <div class="col-md-6 col-sm-9">
                                            <input type="text" class="form-control"
                                                   ng-model="vm.editProduct.secondaryName" />
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-sm-3 control-label no-padding-right"> 容量 | 重量 | 气味</label>

                                        <div class="col-sm-3">
                                            <input class="col-xs-12" type="text"
                                                   ng-model="vm.editProduct.content" />
                                        </div>
                                        <div class="col-sm-3">
                                            <input class="col-xs-12" type="text"
                                                   ng-model="vm.editProduct.weight" />
                                        </div>
                                        <div class="col-sm-3">
                                            <input class="col-xs-12" type="text"
                                                   ng-model="vm.editProduct.flavor" />
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-sm-3 control-label no-padding-right"> 宽度 | 高度 | 厚度</label>

                                        <div class="col-sm-3">
                                            <input class="col-xs-12" type="text"
                                                   ng-model="vm.editProduct.width" />
                                        </div>
                                        <div class="col-sm-3">
                                            <input class="col-xs-12" type="text"
                                                   ng-model="vm.editProduct.height" />
                                        </div>
                                        <div class="col-sm-3">
                                            <input class="col-xs-12" type="text"
                                                   ng-model="vm.editProduct.depth" />
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-sm-3 control-label no-padding-right"> 条形码 </label>

                                        <div class="col-md-6 col-sm-9">
                                            <input class="col-xs-12" type="text"
                                                   ng-model="vm.editProduct.barCode" />
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-sm-3 control-label no-padding-right"> 价格 | 折扣 </label>
                                        <div class="col-sm-3">
                                            <input class="col-xs-12" type="number"
                                                   ng-model="vm.editProduct.price" />
                                        </div>
                                        <div class="col-sm-3">
                                            <input class="col-xs-12" type="number"
                                                   ng-model="vm.editProduct.discount" />
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-sm-3 control-label no-padding-right"> 商品介绍 </label>
                                        <div class="col-sm-9">
                                            <textarea class="col-xs-12" rows="10"
                                                      ng-model="vm.editProduct.description" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label no-padding-right"> 功能功效 </label>
                                        <div class="col-sm-9">
                                            <textarea class="col-xs-12" rows="10"
                                                      ng-model="vm.editProduct.effect" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label no-padding-right"> 成分 </label>
                                        <div class="col-sm-9">
                                            <textarea class="col-xs-12" rows="10"
                                                      ng-model="vm.editProduct.texture" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label no-padding-right"> 形状 </label>
                                        <div class="col-sm-9">
                                            <textarea class="col-xs-12" rows="10"
                                                      ng-model="vm.editProduct.shape" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label no-padding-right"> 用法用量 </label>
                                        <div class="col-sm-9">
                                            <textarea class="col-xs-12" rows="10"
                                                      ng-model="vm.editProduct.instruction" />
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-sm-3 control-label no-padding-right"> 使用建议 </label>
                                        <div class="col-sm-9">
                                            <textarea class="col-xs-12" rows="10"
                                                      ng-model="vm.editProduct.advice" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label no-padding-right"> 注意事项 </label>
                                        <div class="col-sm-9">
                                            <textarea class="col-xs-12" rows="10"
                                                      ng-model="vm.editProduct.notice" />
                                        </div>
                                    </div>

                                    <!--<div class="form-group">
                                        <label class="col-sm-3 control-label no-padding-right"> 追加文案 </label>

                                        <div class="col-sm-9">
                                            <textarea class="col-xs-12" rows="6"
                                                      ng-model="vm.editProduct.extraInformation" />
                                        </div>
                                    </div>-->

                                    <!--<div class="form-group">
                                        <label class="col-sm-3 control-label no-padding-right"> 四季 </label>

                                        <div class="col-sm-9">
                                            <input type="checkbox" style="margin-top:10px" ng-model="vm.editProduct.spring"/> SP &nbsp;&nbsp;
                                            <input type="checkbox" ng-model="vm.editProduct.summer"/> SW &nbsp;&nbsp;
                                            <input type="checkbox" ng-model="vm.editProduct.autumn"/> A &nbsp;&nbsp;
                                            <input type="checkbox" ng-model="vm.editProduct.winter"/> W &nbsp;&nbsp;
                                        </div>
                                    </div>

                                    <div class="form-group">

                                        <label class="col-sm-3 control-label no-padding-right"> 登陆日期 / 终止日期</label>

                                        <div class="col-sm-9">
                                            <input kendo-date-picker
                                                   k-format="'yyyy-MM-dd'"
                                                   style="width: 40%;"
                                                   ng-model="vm.editProduct.activationDate" />
                                            <input kendo-date-picker
                                                   k-format="'yyyy-MM-dd'"
                                                   style="width: 40%;"
                                                   ng-model="vm.editProduct.expiryDate" />
                                        </div>
                                    </div>-->
                                    <div class="clearfix form-actions">
                                        <div class="col-md-offset-3 col-md-9">
                                            <button class="btn btn-info" type="button"
                                                    ng-click="vm.update()">
                                                <i class="ace-icon fa fa-check bigger-110"></i>
                                                更新
                                            </button>

                                            &nbsp; &nbsp; &nbsp;
                                            <a class="btn" ng-href="#/categories/{{vm.editProduct.categoryId}}/products">
                                                <i class="ace-icon fa fa-undo bigger-110"></i>
                                                返回
                                            </a>
                                        </div>
                                    </div>

                                </form>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

        </div>

        <div class="col-md-5 col-xs-12">
            <!-- image -->
            <div class="widget-box transparent">
                <div class="widget-header">
                    <h4 class="widget-title lighter">产品图片</h4>

                    <div class="widget-toolbar no-border">
                        <a href="" data-action="collapse">
                            <i class="ace-icon fa fa-chevron-up"></i>
                        </a>
                    </div>
                </div>

                <div class="widget-body">
                    <div class="widget-main no-padding-left no-padding-right">
                        <!-- product images -->
                        <form class="form-horizontal" enctype="multipart/form-data">
                            <div class="form-group">
                                <label class="col-sm-3 control-label no-padding-right"> 图片类型</label>

                                <div class="col-sm-9">
                                    <select class="form-control" 
                                            ng-model="vm.selectedImgTypeId"
                                            ng-change="vm.imgTypeChanged()">
                                        <option value="1">商品图片</option>
                                        <!--<option value="2">介绍图片</option>-->
                                        <option value="2">使用说明图片</option>
                                        <!--<option value="4">追加文案图片</option>-->
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label no-padding-right"> 上传图片</label>

                                <div class="col-md-9">
                                    <input name="files" id="files"
                                           type="file"
                                           kendo-upload
                                           k-async="{ saveUrl: '+{{vm.fileUploadUrl}}+', autoUpload: true,withCredentials:false }"
                                           k-select="onSelect"
                                           k-error="onError"
                                           k-success="onSuccess"
                                           k-upload="onUpload"
                                           k-multiple="false" />
                                </div>
                            </div>
                        </form>
                                                
                        <div class="row">
                            <div class="col-xs-12">
                                <ul class="ace-thumbnails clearfix">
                                    <li ng-repeat="img in vm.images">
                                        <a href="" data-rel="colorbox">
                                            <img style="height:150px; width:150px;" ng-src="{{vm.imgUrl}}/{{img.fileName}}" />
                                            <div class="text">
                                                <div class="inner">{{ img.name }}</div>
                                            </div>
                                        </a>
                                        <div class="tags">
                                            <span class="label-holder">
                                                <span class="label label-success">{{ vm.showTypeName(img.productImageTypeId) }}</span>
                                            </span>
                                        </div>
                                        <div class="tools tools-bottom">
                                            <a href=""
                                               ng-click="vm.openEditImgWin(img)">
                                                <i class="ace-icon fa fa-pencil"></i>
                                            </a>
                                            <a href=""
                                               ng-click="vm.delete(img.productImageId)">
                                                <i class="ace-icon fa fa-times red"></i>
                                            </a>
                                        </div>
                                    </li>

                                </ul>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="widget-box transparent">
                <div class="widget-header">
                    <h4 class="widget-title lighter">条形码</h4>
                    <div class="widget-toolbar no-border">
                        <a href="" data-action="collapse">
                            <i class="ace-icon fa fa-chevron-up"></i>
                        </a>
                    </div>
                </div>

                <div class="widget-body">
                    <div class="widget-main no-padding-left no-padding-right">
                        <!-- dynamic barcode image -->
                        <div class="row">
                            <div class="col-xs-12">
                                <div id="barcodeImg"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!--<div class="widget-box transparent">
                <div class="widget-header">
                    <h4 class="widget-title lighter">可购入实体店</h4>

                    <div class="widget-toolbar no-border">
                        <a href="" data-action="collapse">
                            <i class="ace-icon fa fa-chevron-up"></i>
                        </a>


                    </div>
                </div>

                <div class="widget-body">
                    <div class="widget-main no-padding-left no-padding-right">
                        <table class="table table-striped table-bordered  table-hover">
                            <thead>
                                <tr>
                                    <th>零售商名称</th>
                                    <th>国家</th>
                                    <th>州</th>
                                    <th>城市</th>
                                    <th>地址</th>
                                    <th>经度</th>
                                    <th>维度</th>
                                </tr>
                            </thead>

                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>-->
            <!--<div class="widget-box transparent">
                <div class="widget-header">
                    <h4 class="widget-title lighter">可购入网店</h4>

                    <div class="widget-toolbar no-border">
                        <a href="" data-action="collapse">
                            <i class="ace-icon fa fa-chevron-up"></i>
                        </a>


                    </div>
                </div>

                <div class="widget-body">
                    <div class="widget-main no-padding-left no-padding-right">
                        <table class="table table-striped table-bordered  table-hover">
                            <thead>
                                <tr>
                                    <th>名称</th>
                                    <th>网址</th>
                                    <th>Logo</th>
                                </tr>
                            </thead>

                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>-->
        </div>
    </div>
</div>

<!-- edit image window -->
<div kendo-window="vm.winEdit" k-title="'修改图片类型'" k-position="{ top: 120, left: '40%' }"
     k-width="550" k-visible="false" k-modal="true">
    <div class="form-horizontal">
        <!--<div class="form-group">
            <label class="col-md-2 control-label"> 名称 </label>
            <div class="col-md-8">
                <div class="fg-line">
                    <input type="text" class="form-control"
                           ng-model="editImage.name" />
                </div>
            </div>
        </div>-->
        <div class="form-group">
            <label class="col-md-2 control-label">图片类型</label>
            <div class="col-md-8">
                <div class="fg-line">
                    <select class="form-control" 
                            ng-options="type.value as type.name for type in vm.imgTypes"
                            ng-model="vm.editImage.productImageTypeId">
                    </select>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="col-md-2 control-label"></label>
            <div class="col-md-8">
                <button type="button" class="btn btn-primary btn-lg"
                        ng-click="vm.updateImg();">
                    Update
                </button>&nbsp;&nbsp;
                <button type="button" class="btn btn-default btn-lg"
                        ng-click="vm.winEdit.close();">
                    Close
                </button>
            </div>

        </div>
    </div>
</div>

